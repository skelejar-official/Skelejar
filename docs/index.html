<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Skelejar: Exposing the Single Flaw in Great Villains</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Inter Font -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            /* DEEP DARK BACKGROUND */
            background-color: #0d1117; 
        }
        /* Custom colors */
        .text-accent-red { color: #f87171; } /* The specific red color */
        .bg-dark-card { background-color: #161b22; } /* Darker card background for headers/cards */
        
        /* Collapse Transition CSS */
        .collapse-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease-in-out;
        }
        .collapse-content.expanded {
            /* Ensures all article content displays */
            max-height: 3000px; 
        }
        .flaw-toggle:hover svg {
            transform: rotate(180deg);
        }
        .flaw-toggle[aria-expanded="true"] svg {
            transform: rotate(180deg);
        }
        .flaw-toggle svg {
            transition: transform 0.3s ease;
        }
        /* Active filter buttons use the accent red */
        .filter-btn.active {
            background-color: #f87171; 
        }
    </style>
</head>
<body class="min-h-screen flex flex-col">

    <!-- Navigation/Header Block (Now relative for absolute positioning of the nav links) -->
    <header class="bg-dark-card shadow-lg sticky top-0 z-20 border-b border-gray-700 relative">
        <div class="container mx-auto px-4 pt-16 pb-6 flex flex-col items-center">
            
            <!-- ABSOLUTELY POSITIONED NAV LINKS (Top Right Corner) -->
            <div class="absolute top-4 right-4 md:right-10 z-30">
                <nav class="flex space-x-6">
                    <a href="index 2.html" class="text-accent-red font-semibold hover:underline border-b-2 border-accent-red pb-1 transition duration-200">Home</a>
                    <a href="about.html" class="text-white font-semibold hover:text-accent-red transition duration-200">About</a>
                    <a href="#" class="px-3 py-1 bg-accent-red text-white font-semibold rounded-full hover:bg-red-500 transition-colors duration-300 text-sm">Submit Flaw</a>
                </nav>
            </div>
            
            <!-- 1. Centered Logo and Site Title (Pushed down by pt-16) -->
            <div class="flex flex-col items-center mb-6">
                <a href="index 2.html" class="text-3xl font-black text-white flex items-center space-x-3 transition-colors duration-300 hover:text-gray-300">
                    <!-- LOGO IMAGE (UPDATED URL) -->
                    <img src="https://raw.githubusercontent.com/skelejar-official/Skelejar/main/docs/logo.png" alt="Skelejar Skull Logo" class="w-10 h-10 object-contain">
                    <!-- Skelejar title is now red -->
                    <span class="text-4xl text-accent-red">Skelejar</span>
                </a>
                <!-- Tagline directly below the title -->
                <h1 class="text-xl font-medium text-gray-400 mt-1">Exposing the Single Flaw in Great Villains</h1>
            </div>

            <!-- 2. Search Bar (Standalone, Centered, and Wider) -->
            <div class="flex justify-center w-full mb-4">
                <div class="w-full max-w-lg">
                    <input id="search-input" type="text" placeholder="Search Villains or Flaws..." class="w-full p-3 rounded-xl bg-[#21262d] text-white border border-gray-700 focus:outline-none focus:ring-2 focus:ring-accent-red placeholder-gray-500 transition duration-200">
                </div>
            </div>

            <!-- 3. Filter Buttons (Centered) -->
            <div id="filter-buttons" class="mt-2 flex flex-wrap justify-center gap-3">
                <button data-filter="all" class="filter-btn px-4 py-2 text-sm rounded-full bg-accent-red text-white font-semibold shadow-md transition duration-200 active">All Flaws</button>
                <button data-filter="hubris" class="filter-btn px-4 py-2 text-sm rounded-full bg-gray-700 text-white font-semibold hover:bg-gray-600 transition duration-200">Hubris</button>
                <button data-filter="emotional" class="filter-btn px-4 py-2 text-sm rounded-full bg-gray-700 text-white font-semibold hover:bg-gray-600 transition duration-200">Emotional</button>
                <button data-filter="pragmatism" class="filter-btn px-4 py-2 text-sm rounded-full bg-gray-700 text-white font-semibold hover:bg-gray-600 transition duration-200">Pragmatism</button>
            </div>
        </div>
    </header>

    <!-- Main Content Area -->
    <main class="flex-grow container mx-auto px-4 py-12">
        
        <!-- VILLAIN CARD SECTION -->
        <section id="villain-list" class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">

            <!-- Card 1: Emperor Palpatine (Star Wars) -->
            <article class="villain-card bg-dark-card rounded-xl shadow-2xl overflow-hidden transition-transform duration-300 hover:scale-[1.02] border border-gray-700" data-flaw-type="emotional">
                <div class="p-6">
                    <h2 class="text-3xl font-bold text-white mb-2">Emperor Palpatine</h2>
                    <p class="text-gray-400 mb-4 text-sm">Source: Star Wars: Return of the Jedi</p>
                    
                    <div class="border-t border-gray-700 pt-4">
                        <h3 class="text-xl font-semibold text-accent-red mb-3">The Fatal Flaw</h3>
                        <p class="text-gray-300 italic">"Underestimating Filial Love"</p>

                        <button class="flaw-toggle mt-4 w-full text-left flex justify-between items-center text-white font-bold py-2 px-4 rounded-lg bg-gray-700 hover:bg-gray-600 transition-colors duration-200" data-villain-id="palpatine">
                            <span>Read Analysis</span>
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 ml-2" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
                            </svg>
                        </button>

                        <div id="content-palpatine" class="collapse-content mt-4">
                            <p class="text-gray-400 leading-relaxed">Palpatine’s entire master plan—to replace Darth Vader with Luke Skywalker—hinged on corruption through hatred. His fatal error was rooted in his own cynical worldview: he simply could not conceive of **unconditional love** as a quantifiable, destructive force. His dramatic, prolonged torture of Luke was meant to trigger hate but instead activated Vader's repressed fatherly bond. Had Palpatine simply executed Luke quickly and dispassionately, Vader would have remained loyal, and the Empire would have endured. His inability to tolerate emotion was his ultimate, self-inflicted wound.</p>
                            <p class="text-sm mt-3 text-gray-500">Theme: Emotional Blindness / Hubris</p>
                        </div>
                    </div>
                </div>
            </article>

            <!-- Card 2: Howard Payne (Speed) -->
            <article class="villain-card bg-dark-card rounded-xl shadow-2xl overflow-hidden transition-transform duration-300 hover:scale-[1.02] border border-gray-700" data-flaw-type="hubris">
                <div class="p-6">
                    <h2 class="text-3xl font-bold text-white mb-2">Howard Payne</h2>
                    <p class="text-gray-400 mb-4 text-sm">Source: Speed</p>
                    
                    <div class="border-t border-gray-700 pt-4">
                        <h3 class="text-xl font-semibold text-accent-red mb-3">The Fatal Flaw</h3>
                        <p class="text-gray-300 italic">"The Need to Be Present"</p>

                        <button class="flaw-toggle mt-4 w-full text-left flex justify-between items-center text-white font-bold py-2 px-4 rounded-lg bg-gray-700 hover:bg-gray-600 transition-colors duration-200" data-villain-id="payne">
                            <span>Read Analysis</span>
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 ml-2" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
                            </svg>
                        </button>

                        <div id="content-payne" class="collapse-content mt-4">
                            <p class="text-gray-400 leading-relaxed">Payne's bomb mechanism was functionally flawless: slow down, explode. His downfall wasn't the mechanics, but his **addiction to the spectacle**. His need to personally supervise the payoff, communicate with Jack Traven, and involve himself in the complex, rule-laden logistics of the transfer made him a target. If he had simply set the parameters and disappeared, instructing the authorities to leave the bag at a random, remote location with no contact, he would have collected the money and vanished. His pursuit of the dramatic, cinematic moment led directly to his capture.</p>
                            <p class="text-sm mt-3 text-gray-500">Theme: Vain Intellectualism / Micromanagement</p>
                        </div>
                    </div>
                </div>
            </article>

            <!-- Card 3: Thanos (Avengers: Infinity War/Endgame) -->
            <article class="villain-card bg-dark-card rounded-xl shadow-2xl overflow-hidden transition-transform duration-300 hover:scale-[1.02] border border-gray-700" data-flaw-type="pragmatism">
                <div class="p-6">
                    <h2 class="text-3xl font-bold text-white mb-2">Thanos</h2>
                    <p class="text-gray-400 mb-4 text-sm">Source: Avengers: Infinity War / Endgame</p>
                    
                    <div class="border-t border-gray-700 pt-4">
                        <h3 class="text-xl font-semibold text-accent-red mb-3">The Fatal Flaw</h3>
                        <p class="text-gray-300 italic">"Assuming Immediate and Permanent Retirement"</p>

                        <button class="flaw-toggle mt-4 w-full text-left flex justify-between items-center text-white font-bold py-2 px-4 rounded-lg bg-gray-700 hover:bg-gray-600 transition-colors duration-200" data-villain-id="thanos">
                            <span>Read Analysis</span>
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 ml-2" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
                            </svg>
                        </button>

                        <div id="content-thanos" class="collapse-content mt-4">
                            <p class="text-gray-400 leading-relaxed">Thanos’s plan was to balance the universe, and he succeeded. His fatal flaw was the **lack of a contingency plan post-success**. By immediately destroying the Infinity Stones and retreating to an idyllic farm, he signaled to the remaining Avengers that the threat was over and created a five-year period of stable grief. This stability allowed the heroes to mourn, regroup, and ultimately invent the means to time travel. Had he kept the Stones, or continued to rule with the Gauntlet, or even created a complex fail-safe, the Avengers would have had no opportunity to reverse his actions.</p>
                            <p class="text-sm mt-3 text-gray-500">Theme: Complacency / Lack of Foresight</p>
                        </div>
                    </div>
                </div>
            </article>

        </section>
    </main>

    <!-- Footer -->
    <footer class="bg-dark-card mt-12 py-6 border-t border-gray-700">
        <div class="container mx-auto px-4 text-center text-gray-500 text-sm">
            &copy; 2024 Skelejar. Exposing the flaws in perfect plans.
        </div>
    </footer>

    <!-- INTERACTIVE JAVASCRIPT: Collapse, Search, and Filter Logic -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const villainCards = document.querySelectorAll('.villain-card');
            const filterButtons = document.querySelectorAll('.filter-btn');
            const searchInput = document.getElementById('search-input');
            const collapseButtons = document.querySelectorAll('.flaw-toggle');

            // --- 1. Collapse Logic (Existing functionality) ---
            collapseButtons.forEach(button => {
                const contentId = button.getAttribute('data-villain-id');
                const content = document.getElementById(`content-${contentId}`);
                button.setAttribute('aria-expanded', 'false');

                button.addEventListener('click', () => {
                    const isExpanded = button.getAttribute('aria-expanded') === 'true';
                    
                    if (isExpanded) {
                        // Collapse the current content
                        content.classList.remove('expanded');
                        content.style.maxHeight = '0';
                        button.setAttribute('aria-expanded', 'false');
                    } else {
                        // Close other expanded contents
                        collapseButtons.forEach(btn => {
                            if (btn !== button && btn.getAttribute('aria-expanded') === 'true') {
                                const otherContentId = btn.getAttribute('data-villain-id');
                                const otherContent = document.getElementById(`content-${otherContentId}`);
                                otherContent.classList.remove('expanded');
                                otherContent.style.maxHeight = '0';
                                btn.setAttribute('aria-expanded', 'false');
                            }
                        });

                        // Expand the clicked content
                        content.style.maxHeight = content.scrollHeight + "px";
                        content.classList.add('expanded');
                        button.setAttribute('aria-expanded', 'true');
                    }
                });
            });

            // --- 2. Filter Logic (New functionality) ---
            filterButtons.forEach(button => {
                button.addEventListener('click', () => {
                    // Remove active class from all buttons
                    filterButtons.forEach(btn => {
                        btn.classList.remove('active', 'bg-accent-red');
                        btn.classList.add('bg-gray-700', 'hover:bg-gray-600');
                    });
                    
                    // Add active class to the clicked button
                    button.classList.add('active', 'bg-accent-red');
                    button.classList.remove('bg-gray-700', 'hover:bg-gray-600');
                    
                    const filterType = button.getAttribute('data-filter');
                    
                    villainCards.forEach(card => {
                        const cardType = card.getAttribute('data-flaw-type');
                        
                        if (filterType === 'all' || cardType === filterType) {
                            card.style.display = 'block';
                        } else {
                            card.style.display = 'none';
                        }
                    });
                });
            });

            // --- 3. Search Logic (New functionality) ---
            searchInput.addEventListener('input', (e) => {
                const searchTerm = e.target.value.toLowerCase();

                // Reset filter buttons when searching
                filterButtons.forEach(btn => btn.classList.remove('active', 'bg-accent-red'));
                document.querySelector('[data-filter="all"]').classList.add('active', 'bg-accent-red');
                filterButtons.forEach(btn => {
                     if (!btn.classList.contains('active')) {
                        btn.classList.add('bg-gray-700', 'hover:bg-gray-600');
                     }
                });


                villainCards.forEach(card => {
                    const title = card.querySelector('h2').textContent.toLowerCase();
                    const flaw = card.querySelector('.text-gray-300.italic').textContent.toLowerCase();
                    const analysis = card.querySelector('.collapse-content p:first-child').textContent.toLowerCase();
                    
                    if (title.includes(searchTerm) || flaw.includes(searchTerm) || analysis.includes(searchTerm)) {
                        card.style.display = 'block';
                    } else {
                        card.style.display = 'none';
                    }
                });
            });
            
            // Set initial active state for 'All Flaws' button
            document.querySelector('[data-filter="all"]').click();
        });
    </script>
</body>
</html>
